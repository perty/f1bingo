<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Start</title>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
        }
        td {
            border: 1px solid black;
            height: 50px;
            text-align: center;
        }
    </style>
</head>
<body>
<h1>Välj GP och bingoist</h1>
<form id="weekendPaletteForm">
    <label for="weekend">Välj GP:</label>
    <select id="weekend" name="weekend" required>
        <option value="">Välj ett GP...</option>
    </select><br><br>


    <label for="fan">Välj bingoist:</label>
    <select id="fan" name="fan" required>
        <option value="">Välj en bingoist...</option>
    </select><br><br>

    <input type="submit" value="Visa">
</form>

<script>
    function fetchRaceWeekends() {
        fetch('/weekend')
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                const select = document.getElementById('weekend');
                data.forEach(function(weekend) {
                    const option = document.createElement('option');
                    option.value = weekend.id;
                    option.textContent = weekend.name;
                    select.appendChild(option);
                });
            })
            .catch(function(error) {
                console.error('Error:', error);
            });
    }

    // Kalla på funktionen när sidan laddas
    fetchRaceWeekends();
</script>
<script>
    function fetchFans() {
        fetch('/fan')
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                const select = document.getElementById('fan');
                data.forEach(function(fan) {
                    const option = document.createElement('option');
                    option.value = fan.id;
                    option.textContent = fan.name;
                    select.appendChild(option);
                });
            })
            .catch(function(error) {
                console.error('Error:', error);
            });
    }

    // Kalla på funktionen när sidan laddas
    fetchFans();
</script>
<script>
    document.getElementById('weekendPaletteForm').onsubmit = function (event) {
        event.preventDefault();
        const weekend = document.getElementById('weekend').value;
        const fan = document.getElementById('fan').value;
        window.location.href = '/weekend.html?weekend=' + encodeURIComponent(weekend) + '&fan=' + encodeURIComponent(fan);
    };
</script>

</body>
</html>
